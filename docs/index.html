<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>rooter</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" type="text/css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/gh/mum-never-proud/unified-demo-theme/dist/styles/theme.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div class="alert alert-warning text-center" role="alert" style="margin:0">
    <p>Supports both <b>history</b> and <b>hashmode</b></p>
    <p>pfft, in <b>history mode</b> except for home page, refreshing page other paths will throw 404.</p>
  </div>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" route>rooter</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" route>Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" route>About</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Dropdown
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" route>Action</a>
            <a class="dropdown-item" route>Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" route>Something else</a>
          </div>
        </li>
        <li class="nav-item" style="cursor: not-allowed;">
          <a class="nav-link disabled" href="#">Disabled</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container">
    <div class="row">
      <div class="col-12">
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12">
        <div id="content"></div>
      </div>
    </div>
    <div class="row mt-5">
      <div class="col-12">
        <footer>
          <p class="text-center">made with much<img alt="logo" src="https://cdn.jsdelivr.net/gh/mum-never-proud/unified-demo-theme@latest/dist/images/icecream-love.svg" width="50" height="50"></p>
        </footer>
      </div>
    </div>
  </div>
  <template id="home">
    <div class="card text-white bg-dark mb-3">
      <div class="card-header">Home</div>
      <div class="card-body">
        <h5 class="card-title">Title</h5>
        <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
          incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
          laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
          velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident,
          sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
      </div>
    </div>
  </template>
  <template id="about">
    <div class="card text-white bg-primary mb-3">
      <div class="card-header">About</div>
      <div class="card-body">
        <h5 class="card-title">Title</h5>
        <p class="card-text">Blandit libero volutpat sed cras ornare arcu. Felis donec et odio pellentesque. Auctor
          urna nunc id cursus metus aliquam eleifend mi in. Fermentum leo vel orci porta. Tempus imperdiet nulla
          malesuada pellentesque elit eget gravida cum. Amet dictum sit amet justo donec enim diam. Auctor neque
          vitae tempus quam pellentesque nec. Nunc congue nisi vitae suscipit. At lectus urna duis convallis.
          Auctor elit sed vulputate mi sit amet mauris commodo quis. Urna nunc id cursus metus. Sit amet venenatis
          urna cursus. In mollis nunc sed id. Dolor purus non enim praesent elementum facilisis leo vel fringilla.
          Rutrum quisque non tellus orci ac auctor augue mauris. Orci ac auctor augue mauris augue neque gravida
          in fermentum.
        </p>
      </div>
    </div>
  </template>
  <template id="action">
    <div class="card text-white bg-success mb-3">
      <div class="card-header">Action</div>
      <div class="card-body">
        <h5 class="card-title">Title</h5>
        <p class="card-text">Blandit libero volutpat sed cras ornare arcu. Felis donec et odio pellentesque. Auctor
          urna nunc id cursus metus aliquam eleifend mi in. Fermentum leo vel orci porta. Tempus imperdiet nulla
          malesuada pellentesque elit eget gravida cum. Amet dictum sit amet justo donec enim diam. Auctor neque
          vitae tempus quam pellentesque nec. Nunc congue nisi vitae suscipit. At lectus urna duis convallis.
          Auctor elit sed vulputate mi sit amet mauris commodo quis. Urna nunc id cursus metus. Sit amet venenatis
          urna cursus. In mollis nunc sed id. Dolor purus non enim praesent elementum facilisis leo vel fringilla.
          Rutrum quisque non tellus orci ac auctor augue mauris. Orci ac auctor augue mauris augue neque gravida
          in fermentum.
        </p>
      </div>
    </div>
  </template>
  <template id="another-action">
    <div class="card text-white bg-info mb-3">
      <div class="card-header">Another Action</div>
      <div class="card-body">
        <h5 class="card-title">Title</h5>
        <p class="card-text">Blandit libero volutpat sed cras ornare arcu. Felis donec et odio pellentesque. Auctor
          urna nunc id cursus metus aliquam eleifend mi in. Fermentum leo vel orci porta. Tempus imperdiet nulla
          malesuada pellentesque elit eget gravida cum. Amet dictum sit amet justo donec enim diam. Auctor neque
          vitae tempus quam pellentesque nec. Nunc congue nisi vitae suscipit. At lectus urna duis convallis.
          Auctor elit sed vulputate mi sit amet mauris commodo quis. Urna nunc id cursus metus. Sit amet venenatis
          urna cursus. In mollis nunc sed id. Dolor purus non enim praesent elementum facilisis leo vel fringilla.
          Rutrum quisque non tellus orci ac auctor augue mauris. Orci ac auctor augue mauris augue neque gravida
          in fermentum.
        </p>
      </div>
    </div>
  </template>
  <template id="something-else">
    <div class="card text-white bg-danger mb-3">
      <div class="card-header">Something else</div>
      <div class="card-body">
        <h5 class="card-title">Title</h5>
        <p class="card-text">Blandit libero volutpat sed cras ornare arcu. Felis donec et odio pellentesque. Auctor
          urna nunc id cursus metus aliquam eleifend mi in. Fermentum leo vel orci porta. Tempus imperdiet nulla
          malesuada pellentesque elit eget gravida cum. Amet dictum sit amet justo donec enim diam. Auctor neque
          vitae tempus quam pellentesque nec. Nunc congue nisi vitae suscipit. At lectus urna duis convallis.
          Auctor elit sed vulputate mi sit amet mauris commodo quis. Urna nunc id cursus metus. Sit amet venenatis
          urna cursus. In mollis nunc sed id. Dolor purus non enim praesent elementum facilisis leo vel fringilla.
          Rutrum quisque non tellus orci ac auctor augue mauris. Orci ac auctor augue mauris augue neque gravida
          in fermentum.
        </p>
      </div>
    </div>
  </template>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/mum-never-proud/rooter/dist/rooter.js"></script>
  <script>
    ;(function () {
      const locationPrefix = window.location.href.indexOf('#') >= 0 ? '#' : window.location.pathname;

      bootstrapRoute();

      const router = new rooter({ mode: locationPrefix === '#' ? 'hash' : 'history' });
      const content = document.getElementById('content');
      const homeContent = document.getElementById('home');
      const aboutContent = document.getElementById('about');
      const actionContent = document.getElementById('action');
      const anotherActionContent = document.getElementById('another-action');
      const somethingElseContent = document.getElementById('something-else')

      router.get(locationPrefix, () => updateContent(homeContent));
      router.get(locationPrefix + 'about', () => updateContent(aboutContent));
      router.get(locationPrefix + 'action', () => updateContent(actionContent));
      router.get(locationPrefix + 'another-action', () => updateContent(anotherActionContent));
      router.get(locationPrefix + 'something-else', () => updateContent(somethingElseContent));
      router.bind();

      function bootstrapRoute() {
        /**
         * just a hacky way to make this page work with both "history" and "hash" mode
         * make sure to modify entries on adding/removing "route" attribute in/from anchors
         */
        const routes = ['', '', 'about', 'action', 'another-action', 'something-else'];

        document.querySelectorAll('[route]').forEach((ele, idx) => {
          ele.setAttribute('route', locationPrefix + routes[idx]);
          ele.addEventListener('click', e => {
          e.preventDefault();
          router.navigate(e.target.getAttribute('route'));
          }, false);
        });
      }

      function updateContent(template) {
        content.innerHTML = template.innerHTML;
      }
    })();
  </script>
</body>
</html>
